<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<Rule language="beanshell" name="CMH-Get-Usernames-Cerner-Rule">
  <Source><![CDATA[ 
	import sailpoint.object.Custom;
	import sailpoint.tools.FTPFileTransport;
	
	String connUser = null;
	String connPass = null;
	String connURL = null;
	Custom custom = context.getObjectByName(Custom.class,"CMH-Custom-Shared-Location");
	if(custom!=null){
		connUser = custom.getString("ConnUsername");
		connPass = custom.getString("ConnPassword");
		connURL = custom.getString("ConnURL");
		
	}
	
	FTPFileTransport ftp = new FTPFileTransport();
	Map connectionMap = new HashMap();
	connectionMap.put(ftp.HOST,"172.17.36.172");
	connectionMap.put(ftp.USER,"labuser");
	connectionMap.put(ftp.PASSWORD,"Pwcwelcome1");
	boolean success = ftp.connect(connectionMap);
	
	if(success){
		return "Successful";
	}
  
  	return "Failure";
  ]]></Source>
</Rule>
